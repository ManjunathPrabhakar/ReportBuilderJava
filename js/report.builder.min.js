$(document).ready(function(){$(".passed").addClass("teal lighten-2");$(".failed").addClass("red lighten-2");$(".skipped").addClass("amber lighten-2");$(".undefined").addClass("amber lighten-2");$(".pending").addClass("amber lighten-2");var e=$(".scenario.passed");var a=$(".scenario.failed");var t=$(".scenario.skipped");var r=$(".scenario.undefined");var n=$(".scenario.pending");var d=$(".scenario");var i=$(".feature.working");var s=$(".feature.broken");var l=$(".feature.incomplete");var p=$(".feature");e.prepend('<i class="material-icons">done_all</i>');a.prepend('<i class="material-icons">highlight_off</i>');t.prepend('<i class="material-icons">error_outline</i>');r.prepend('<i class="material-icons">error_outline</i>');n.prepend('<i class="material-icons">error_outline</i>');p.each(function(){var e=$(this);var a=e.find(".scenario.passed").length;var t=e.find(".scenario.failed").length;var r=e.find(".scenario.skipped").length;var n=e.find(".scenario.undefined").length;var d=e.find(".scenario.pending").length;if(a>0){e.find(".collapsible-header").append('<span class="new badge teal lighten-2" data-badge-caption="Passed">'+a+"</span>")}if(t>0){e.find(".collapsible-header").append('<span class="new badge red lighten-2" data-badge-caption="Failed">'+t+"</span>")}if(r>0){e.find(".collapsible-header").append('<span class="new badge amber lighten-2" data-badge-caption="Skipped">'+r+"</span>")}if(n>0){e.find(".collapsible-header").append('<span class="new badge amber lighten-2" data-badge-caption="Undefined">'+n+"</span>")}if(d>0){e.find(".collapsible-header").append('<span class="new badge amber lighten-2" data-badge-caption="Pending">'+d+"</span>")}});$(".errorList .error").each(function(){var e=$(this);var a=e.find(".failedScenarioList .failedScenario").length;if(a>0){e.find(".collapsible-header").append('<span class="new badge blue lighten-2" data-badge-caption="Scenarios">'+a+"</span>")}else{e.remove()}});$(".tabs .tab").click(function(){$(".tabs a").removeClass("blue-text").addClass("white-text");$(this).find("a").removeClass("white-text").addClass("blue-text")});var h=e.length;var o=a.length;var g=t.length;var c=r.length;var u=n.length;var b=d.length;var f=i.length;var v=s.length;var m=l.length;var w=p.length;var x=$("table#metaDataFeatures tbody");var C=$("table#metaDataScenarios tbody");x.append("<tr><th>Total Features</th><td>"+w+"</td></tr>");C.append("<tr><th>Total Scenarios</th><td>"+b+"</td></tr>");var _=document.getElementById("featuresDoughnut").getContext("2d");var k=[];var F=[];var S=[];var y=[];if(f>0){x.append("<tr><th>Working</th><td>"+(f/w*100).toFixed(1)+" %</td></tr>");k.push(f);F.push("Working");S.push("rgba(75, 192, 192, 0.2)");y.push("rgba(75, 192, 192, 1)")}if(v>0){x.append("<tr><th>Broken</th><td>"+(v/w*100).toFixed(1)+" %</td></tr>");k.push(v);F.push("Broken");S.push("rgba(255, 99, 132, 0.2)");y.push("rgba(255, 99, 132, 1)")}if(m>0){x.append("<tr><th>Incomplete</th><td>"+(m/w*100).toFixed(1)+" %</td></tr>");k.push(m);F.push("Incomplete");S.push("rgba(255, 206, 86, 0.2)");y.push("rgba(255, 206, 86, 1)")}var T={labels:F,datasets:[{label:"# of Votes",data:k,backgroundColor:S,borderColor:y,borderWidth:1}]};var P={title:{display:true,text:"Features"}};var D=new Chart(_,{type:"doughnut",data:T,options:P});if(k.length>0){D.draw()}var B=document.getElementById("scenariosDoughnut").getContext("2d");var E=[];var I=[];var U=[];var W=[];if(h>0){C.append("<tr><th>Passed</th><td>"+(h/b*100).toFixed(1)+" %</td></tr>");E.push(h);I.push("Passed");U.push("rgba(75, 192, 192, 0.2)");W.push("rgba(75, 192, 192, 1)")}if(o>0){C.append("<tr><th>Failed</th><td>"+(o/b*100).toFixed(1)+" %</td></tr>");E.push(o);I.push("Failed");U.push("rgba(255, 99, 132, 0.2)");W.push("rgba(255,99,132,1)")}if(g>0){C.append("<tr><th>Skipped</th><td>"+(g/b*100).toFixed(1)+" %</td></tr>");E.push(g);I.push("Skipped");U.push("rgba(255, 206, 86, 0.2)");W.push("rgba(255, 206, 86, 1)")}if(c>0){C.append("<tr><th>Undefined</th><td>"+(c/b*100).toFixed(1)+" %</td></tr>");E.push(c);I.push("Undefined");U.push("rgba(255, 206, 86, 0.2)");W.push("rgba(255, 206, 86, 1)")}if(u>0){C.append("<tr><th>Pending</th><td>"+(u/b*100).toFixed(1)+" %</td></tr>");E.push(u);I.push("Pending");U.push("rgba(255, 206, 86, 0.2)");W.push("rgba(255, 206, 86, 1)")}var A={labels:I,datasets:[{label:"# of Votes",data:E,backgroundColor:U,borderColor:W,borderWidth:1}]};var L={title:{display:true,text:"Scenarios"}};var M=new Chart(B,{type:"doughnut",data:A,options:L});if(E.length>0){M.draw()}$.when($("#summaryTable").DataTable({language:{search:'<i class="material-icons">search</i> Search',searchPlaceholder:"Search",lengthMenu:"Show _MENU_",info:"Showing _START_ to _END_ of _TOTAL_ scenarios",infoFiltered:"filtered from _MAX_ total scenarios"}})).done(function(){$("select").material_select()})});